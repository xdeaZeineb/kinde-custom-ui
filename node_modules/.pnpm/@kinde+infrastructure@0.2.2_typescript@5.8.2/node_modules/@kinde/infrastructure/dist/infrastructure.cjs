"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var l=(e=>(e.UserTokenGeneration="user:tokens_generation",e.M2MTokenGeneration="m2m:token_generation",e.ExistingPasswordProvided="user:existing_password_provided",e.NewPasswordProvided="user:new_password_provided",e))(l||{});const w="0.2.2",b=w,c=(e,n)=>{if(!e||e.includes(".."))throw new Error("Invalid asset path");return`/${e}?${n?`p_org_code=${n}&`:""}cache=@8973ff883c2c40e1bad198b543e12b24@`},v={get(e,n,t){return Reflect.get(e,n.toString(),t)},set(e,n,t){return kinde.idToken.setCustomClaim(n,t),Reflect.set(e,n,t)}},h={get(e,n,t){return Reflect.get(e,n.toString(),t)},set(e,n,t){return kinde.accessToken.setCustomClaim(n,t),Reflect.set(e,n,t)}},T={get(e,n,t){return Reflect.get(e,n.toString(),t)},set(e,n,t){return kinde.m2mToken.setCustomClaim(n,t),Reflect.set(e,n,t)}};function S(){if(!kinde.idToken)throw new Error("IdToken binding not available, please add to workflow/page settings to enable");const e=kinde.idToken.getCustomClaims();return new Proxy(e,v)}function C(){if(!kinde.accessToken)throw new Error("accessToken binding not available, please add to workflow/page settings to enable");const e=kinde.accessToken.getCustomClaims();return new Proxy(e,h)}function F(){if(!kinde.m2mToken)throw new Error("m2mToken binding not available, please add to workflow/page settings to enable");const e=kinde.m2mToken.getCustomClaims();return new Proxy(e,T)}function s(e){if(!kinde.env)throw new Error("env binding not available, please add to workflow/page settings to enable");return kinde.env.get(e)}function K(e){if(!kinde.localization)throw new Error("localization binding not available, please add to workflow/page settings to enable");return kinde.localization.get(e)}function E(e){if(!kinde.auth)throw new Error("auth binding not available");kinde.auth.denyAccess(e)}function y(e,n){if(!kinde.widget)throw new Error("widget binding not available");kinde.widget.invalidateFormField(e,n)}async function g(e,n){if(!kinde.fetch)throw new Error("fetch binding not available");return n.responseFormat||(n.responseFormat="json"),{data:(await kinde.fetch(e,n))?.json}}async function U(e,n){if(!kinde.secureFetch)throw new Error("secureFetch binding not available");return n.responseFormat||(n.responseFormat="json"),{data:(await kinde.secureFetch(e,n))?.json}}async function _(e,n){let t,o;if(!URLSearchParams)throw new Error("url binding not available");if(n?.clientId&&n?.clientSecret)t=n.clientId,o=n.clientSecret;else if(n?.clientIdKey&&n?.clientSecretKey)t=s(n.clientIdKey)?.value,o=s(n.clientSecretKey)?.value;else{if(t=s("KINDE_WF_M2M_CLIENT_ID")?.value,o=s("KINDE_WF_M2M_CLIENT_SECRET")?.value,!t)throw new Error("M2M client ID not set");if(!o)throw new Error("M2M client secret not set")}const{data:a}=await g(`${e.context.domains.kindeDomain}/oauth2/token`,{method:"POST",responseFormat:"json",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({audience:`${e.context.domains.kindeDomain}/api`,grant_type:"client_credentials",client_id:t,client_secret:o})}),r=async({method:i,endpoint:f,params:d,contentType:k="application/json"})=>({data:(await kinde.fetch(`${e.context.domains.kindeDomain}/api/v1/${f}`,{method:i,responseFormat:"json",headers:{authorization:`Bearer ${a.access_token}`,"Content-Type":k,accept:"application/json"},body:d&&new URLSearchParams(d)})).json});return{get:async i=>await r({method:"GET",...i}),post:async i=>await r({method:"POST",...i}),patch:async i=>await r({method:"PATCH",...i}),put:async i=>await r({method:"PUT",...i}),delete:async i=>await r({method:"DELETE",...i})}}const m="@b1d3a51558e64036ad072b56ebae37f5@",u="@847681e125384709836f921deb311104@",p=()=>"@cd65da2987c740d58961024aa4a27194@",I=()=>"@43dffdf2c22f40e9981303cb383f6fac@",$=()=>"@ce0ef44d50f6408985f00c04a85d8430@",P=()=>"@8103c7ff23fe49edb9b0537d2927e74e@",D=()=>"@0c654432670c4d0292c3a0bc3c533247@",R=()=>m,M=()=>u,L=()=>m,j=()=>u,x=e=>c("logo",e),A=e=>c("logo_dark",e),V=e=>c("favicon_svg",e),G=e=>c("favicon_fallback",e),N=e=>!e||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$|^rgb\(.*\)$|^rgba\(.*\)$/.test(e),z=e=>!e||/^(0|\d+(.(\d)+)?(%|px|rem|em))$/.test(e),q=(...e)=>e.every(N)||void 0,H=(...e)=>e.every(z)||void 0,O=({baseBackgroundColor:e,baseLinkColor:n,buttonBorderRadius:t,primaryButtonBackgroundColor:o,primaryButtonColor:a,cardBorderRadius:r,inputBorderRadius:i})=>{if(!q(e,n,o,a))throw console.log("baseBackgroundColor: ",e),console.log("baseLinkColor: ",n),console.log("primaryButtonBackgroundColor: ",o),console.log("primaryButtonColor: ",a),new Error("Invalid color value provided");if(!H(t,r,i))throw console.log("buttonBorderRadius: ",t),console.log("cardBorderRadius: ",r),console.log("inputBorderRadius: ",i),new Error("Invalid border radius value provided");return[e&&`--kinde-designer-base-background-color: ${e};`,n&&`--kinde-designer-base-link-color: ${n};`,r&&`--kinde-designer-card-border-radius: ${r};`,t&&`--kinde-designer-button-border-radius: ${t};`,i&&`--kinde-designer-control-select-text-border-radius: ${i};`,o&&`--kinde-designer-button-primary-background-color: ${o};`,a&&`--kinde-designer-button-primary-color: ${a};`].filter(Boolean).join(`
`)};exports.WorkflowTrigger=l;exports.accessTokenCustomClaims=C;exports.createKindeAPI=_;exports.denyAccess=E;exports.fetch=g;exports.getDarkModeLogoUrl=A;exports.getEnvironmentVariable=s;exports.getFallbackFaviconUrl=G;exports.getKindeCSRF=D;exports.getKindeLoginUrl=M;exports.getKindeNonce=I;exports.getKindeRegisterUrl=R;exports.getKindeRequiredCSS=$;exports.getKindeRequiredJS=P;exports.getKindeSignInUrl=j;exports.getKindeSignUpUrl=L;exports.getKindeWidget=p;exports.getLocalization=K;exports.getLogoUrl=x;exports.getSVGFaviconUrl=V;exports.idTokenCustomClaims=S;exports.invalidateFormField=y;exports.m2mTokenClaims=F;exports.secureFetch=U;exports.setKindeDesignerCustomProperties=O;exports.version=b;
